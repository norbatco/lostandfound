<!DOCTYPE html>
<html lang="en" ng-app="lostAndFoundApp">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>NORBATCO Lost and Found</title>
  
  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
  <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
  
  <!-- AngularJS -->
  <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.8.2/angular.min.js"></script>

  <!-- Icons -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" rel="stylesheet">

  <!-- Fonts-->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;700&display=swap" rel="stylesheet">

  <style>

    /* General Styles */
    body {
      font-family: 'Poppins', sans-serif;
      margin: 0;
      background-color: #555;
    }

    html {
      scroll-behavior: smooth;
    }

    .btn:hover {
      background-color: #003bb3;
      transition: background-color 0.3s ease;
    }

    input:focus, textarea:focus {
      border-color: #0056ff;
      transition: border-color 0.3s ease-in-out;
    }
    /* Transition */
    .fade-in {
      opacity: 0;
      animation: fadeIn 1s forwards;
    }
    
    @keyframes fadeIn {
      100% {opacity: 1;}
    }

    /* Navigation Bar */
    .navbar {
      background-color: rgba(0, 0, 0, 0.7);
    }

    .navbar a {
      color: rgb(255, 255, 255) !important;
    }

    .navbar-brand img {
      height: 75px; 
      width: auto;  
    }

    .navbar-nav {
      display: flex;  
      align-items: center;  
    }

    .navbar-divider {
      margin: 0 10px;  
      color: white;  
      font-size: 18px;  
    }

    .nav-item {
      display: flex;  
      align-items: center;  
    }

    @media (max-width: 768px) {
    /* Remove dividers on phone */
    .navbar-divider {
      display: none;
    }

    /* Center-align nav items and add spacing */
    .navbar-nav {
      text-align: center;
    }

    .nav-item {
      margin-bottom: 5px; /* Add spacing between items */
    }

    .nav-link {
      font-size: 1rem; /* Adjust font size for readability */
    }
    }
  
    /* Header Section */
    .header {
      background: linear-gradient(rgba(0, 0, 0, 0.745), rgba(0, 0, 0, 0.163)), url('https://pia.gov.ph/uploads/2024/02/ef14a2d0c9f48d8756c1ab92433293bf.jpg') no-repeat center center/cover;
      backdrop-filter: blur(10px);
      background-color: rgb(0, 0, 0);
      background-size: cover;
      height: 100vh;
      color: rgb(255, 255, 255);
      text-align: center;
      padding: 100px 20px;
      padding-top: 10%;
      position: relative;
      transition: height 0.3s ease, background-size 0.3s ease; /* Smooth transition for height and background scaling */
    }

    /* Restores header to its original size on scroll */
    .shrink-header {
      height: 400px;
      background-size: auto;
      padding: 50px 20px;
    }

    .header h1, .header p {
      text-shadow: 2px 2px 5px rgba(0, 0, 0, 0.8);
    }

    .header h1 {
      font-size: 3.6vw;
    }

    .header p {
      font-size: 1.8vw;
    }

    /* Small Screens */
    @media (max-width: 768px) {
        .header h1 {
            font-size: 5vw; /* Adjust font size for smaller screens */
        }

        .header p {
            font-size: 2.5vw; /* Adjust paragraph font size */
        }
    }

    /* Very Small SCreens */
    @media (max-width: 480px) {
        .header h1 {
            font-size: 6vw; /* Adjust further for very small screens */
        }

        .header p {
            font-size: 3vw; /* Adjust paragraph font size */
        }
    }

    /* Style for the search icon */
    .search-icon {
      position: absolute;
      top: 50%; 
      left: 8px; 
      transform: translateY(-50%);
      color: #ccc; 
      font-size: 16px; 
      pointer-events: none; 
    }

    /* Spyglass space :P */
    .form-control.pl-4 {
      padding-left: 35px; 
    }

    /* Found Items Section */
    .items-section {
      padding: 25px 25px;
      background: white;
      background-size: cover;
      color: rgb(0, 0, 0);
      border-radius: 15px; /* Rounded corners for the entire section */
      font-size: 0.8vw;
    }

    /* Styling for each card in items-section */
    .card {
      margin: 5px 0;
      color: rgb(0, 0, 0);
      border-radius: 15px;
      overflow: hidden;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
      display: flex; /* Use flexbox to align content */
      flex-direction: column; /* Stack title and text vertically */
      justify-content: space-between; /* Ensure content is spaced */
      padding: 15px;
      box-sizing: border-box; /* Ensure padding is inside the width */
      flex-grow: 1; /* Allow the card to grow when necessary */
      height: auto; 
      min-width: 150px; /* Minimum width to avoid shrinking too small */
    }

    /* Category styles */
    .category-found {
      color: limegreen;
    }

    .category-lost {
      color: red;
    }

    .category-found, .category-lost {
    font-size: 1rem; /* Default category text size */
    font-weight: bold;
    display: block;
    margin-top: 10px;
    }

    /* On hover, make the card a little bigger */
    .card:hover {
      transform: scale(1.05);
    }

    /* Reduce the font size within the card */
    .card-title {
      font-size: 0.9rem; 
      margin-bottom: 10px; 
    }

    .card-text {
      font-size: 0.8rem; 
    }

    /* Default font size for larger screens (e.g., desktops) */
    .card-title {
        font-size: 1.5rem; /* Larger font size */
    }

    .card-text {
        font-size: 1rem; /* Regular text size */
    }

    /* Media Query for Smaller Screens (Phones/Tablets) */
    @media (max-width: 768px) {
        /* Reduce card size on smaller screens */
        .card {
            flex: 1 1 45%; /* Make the cards fit 2 per row */
            max-width: 45%; /* Ensure cards are smaller */
            margin-bottom: 15px;
        }

        /* Smaller font size for titles, text, and category */
        .card-title {
            font-size: 1.2rem; /* Smaller title on small screens */
        }

        .card-text {
            font-size: 0.9rem; /* Smaller text on small screens */
        }

        .category-found, .category-lost {
            font-size: 0.9rem; /* Smaller category text */
        }
    }

    /* Media Query for Very Small Screens (Mobile Phones) */
    @media (max-width: 480px) {
        /* Make the cards even smaller */
        .card {
            flex: 1 1 100%; /* 1 card per row on very small screens */
            max-width: 100%;
        }

        /* Further reduce the font size */
        .card-title {
            font-size: 1rem; /* Even smaller title on mobile phones */
        }

        .card-text {
            font-size: 0.85rem; /* Smaller text for mobile phones */
        }

        .category-found, .category-lost {
            font-size: 0.8rem; /* Smaller category text for mobile phones */
        }
    }

    /* Custom scrollbar style */
    .reported-items-container::-webkit-scrollbar {
      width: 8px;
    }

    .reported-items-container::-webkit-scrollbar-thumb {
      background-color: #888;
      border-radius: 4px;
    }

    .reported-items-container::-webkit-scrollbar-thumb:hover {
      background-color: #555;
    }

    /* Report Pop-up Section */
    .report-popup-container {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.6);
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 1010;
    }

    .report-popup-content {
      background: rgba(157, 157, 157, 0.794);
      padding: 30px;
      border-radius: 10px;
      width: 90%;
      max-width: 500px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
    }

    .report-popup-content h2 {
      text-align: center;
      margin-bottom: 20px;
      color: rgb(255, 255, 255);
      text-shadow: 0 4px 8px rgba(0, 0, 0, 0.43);
    }

    /* Styling for the Reported Items Container */
    .reported-items-container {
        max-height: 600px;  
        overflow-y: auto;   
        overflow-x: hidden;
        border: 2px solid #ddd; 
        padding: 25px; 
        margin-top: 20px;
        border-radius: 15px;
    }

    .card {
        margin-bottom: 10px; /* Add space between cards */
        size: 50%;
    }

    /* Custom scrollbar style */
    .reported-items-container::-webkit-scrollbar {
        width: 8px;  
    }

    .reported-items-container::-webkit-scrollbar-thumb {
        background-color: #888;  
        border-radius: 4px; 
    }

    .reported-items-container::-webkit-scrollbar-thumb:hover {
        background-color: #555;  
    }

    /* About Section */
    #about-section {
      background: linear-gradient(rgba(0, 0, 0, 0.604),rgba(0, 0, 0, 0.53)), url('https://github.com/norbatco/lostandfound/blob/main/norbatco.jpg?raw=true') no-repeat center center/cover;
      background-position: cover;
      color: rgb(255, 255, 255);
      text-align: center;
      padding: 50px 20px;
    }

    /* Adjust paragraph text size inside the About section */
    #about-section p {
      font-size: 1vw; /* Responsive font size based on viewport width */
      transition: font-size 0.3s ease-in-out;
      line-height: 1.6; /* Adjust line height for readability */
      padding-right: 50px;
      text-align: justify;
    }

    /* Media query for smaller screens */
    @media (max-width: 768px) {
      #about-section p {
        font-size: 3vw; /* Make font smaller on smaller screens */
      }
    }

    .about-section img {
      max-width: 100%;
      border-radius: 10px;
    }

    /* Footer */
        .footer-container {
      display: flex;
      background: #282828;
      flex-wrap: wrap; /* Ensure wrapping on smaller screens */
      justify-content: space-between; /* Maintain spacing between sections */
      align-items: center;
      text-align: center; /* Center-align for smaller screens */
      max-width: 100%;
      margin: 0 auto;
      padding: 20px;
      color: white;
    }

    /* Ensure equal width for all sections on larger screens */
    .footer-left, .footer-center, .footer-right {
      flex: 1;
    }

    /* Text alignment adjustments */
    .footer-left {
      text-align: left;
    }

    .footer-right {
      text-align: right;
    }

    .footer p {
      font-size: 0.78vw; /* Responsive footer text size */
      transition: font-size 0.3s ease-in-out;
    }

    @media (max-width: 768px){
      .footer p {
        font-size: 3vw;
      }
    }

    /* Icons Sizing */
    .social-icon {
      font-size: 1.2vw; 
      margin-left: 10px;
      color: white;
      transition: font-size 0.3s ease;
    }

    .social-icon:hover {
      font-size: 1.5vw; 
      color: #0056ff;
    }

    @media (max-width: 768px){
    .social-icon {
      font-size: 5vw; 
      margin-left: 10px;
      color: white;
      transition: font-size 0.3s ease;
    }

    .social-icon:hover {
      font-size: 5vw; 
      color: #0056ff;
    }
    }

    footer p {
      margin: 0;
      margin-bottom: 5px;
    }

    .about-section p {
      margin: 0;
      margin-bottom: 15px;
      padding-right: 50px;
    }

    /* Button to toggle login popup */
    .btn-show-login {
      position: absolute;
      top: 20px;
      right: 20px;
      padding: 10px 15px;
      background-color: #0056ff;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      font-size: 16px;
      opacity: 0%;
    }

    .btn-show-login:hover {
      background-color: #003bb3;
    }

    /* Login Pop-up container */
    .popup-container {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 1000;
    }

    /* Login Pop-up content */
    .popup-content {
      background: 
        linear-gradient(rgba(0, 47, 95, 0.576), rgba(0, 59, 107, 0.601)), /* Color overlay */
        url('https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcS_WG8tmOMPAr1qNI93-jUFyEQXw64xBdRmPg&s') no-repeat center center; /* Background image */
      background-size: cover; /* Ensures the image covers the entire area */
      color: white; /* Text color */
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    }

    .popup-content h2 {
      text-align: center;
      color: #fff;
      margin-bottom: 20px;
    }

    .form-group {
      margin-bottom: 15px;
    }

    .form-group label {
      color: #fff;
      display: block;
      font-size: 14px;
      margin-bottom: 5px;
    }

    .input-wrapper {
      position: relative;
    }

    .input-wrapper i {
      position: absolute;
      left: 10px;
      top: 50%;
      transform: translateY(-50%);
      color: #ccc;
    }

    .input-wrapper input {
      width: 100%;
      padding: 10px 10px 10px 35px;
      border: 1px solid #ccc;
      border-radius: 5px;
    }

    .toggle-password {
      position: absolute;
      right: 40px;
      top: 50%;
      transform: translateY(-50%);
      cursor: pointer;
      color: #777;
    }

    .btn-login {
      width: 100%;
      padding: 10px;
      background-color: #00137f;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }

    .btn-login:hover {
      background-color: #003bb3;
    }

    .password-wrapper {
      position: relative;
    }

    .password-wrapper .toggle-password {
      position: absolute;
      top: 50%;
      right: 10px;
      transform: translateY(-50%);
      cursor: pointer;
      color: #777;
    }

  </style>
</head>
<body ng-controller="mainController">

  <!-- Navbar -->
  <nav class="navbar navbar-expand-lg navbar-dark fixed-top">
    <a class="navbar-brand" href="#">
        <img src="https://raw.githubusercontent.com/norbatco/lostandfound/refs/heads/main/images.png" alt="NORBATCO Logo" style="height: 40px;">
    </a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>
      <div class="collapse navbar-collapse" id="navbarNav">
          <ul class="navbar-nav ml-auto">
              <li class="nav-item">
                  <a class="nav-link" href="#top" data-toggle="collapse" data-target=".navbar-collapse.show">Home</a>
              </li>
              <li class="nav-item navbar-divider d-none d-lg-block">
                  <span>|</span>
              </li>
              <li class="nav-item">
                  <a class="nav-link" href="#" ng-click="toggleReportPopup()" data-toggle="collapse" data-target=".navbar-collapse.show">Create Report</a>
              </li>
              <li class="nav-item navbar-divider d-none d-lg-block">
                  <span>|</span>
              </li>
              <li class="nav-item">
                  <a class="nav-link" href="#about-section" data-toggle="collapse" data-target=".navbar-collapse.show">About</a>
              </li>
              <li class="nav-item navbar-divider d-none d-lg-block">
                  <span>|</span>
              </li>
              <li class="nav-item" ng-if="!adminMode">
                  <a class="nav-link" href="#" ng-click="toggleLoginPopup()" data-toggle="collapse" data-target=".navbar-collapse.show">Login</a>
              </li>
              <li class="nav-item" ng-if="adminMode">
                  <a class="nav-link text-danger" href="#" ng-click="logout()" data-toggle="collapse" data-target=".navbar-collapse.show">Logout</a>
              </li>
          </ul>
      </div>
  </nav>

  <!-- Header Section -->
  <div id="top" class="header fade-in">
    <br><br><br>
    <h1>NORBATCO Lost and Found</h1>
    <p>A Solution for Recovering Belongings on Public Transportation</p>
    <!-- Updated Button -->
    <button class="btn btn-primary my-2" ng-click="scrollDownByPercentage(30)">View Items</button>
  </div>

  <!-- Reported Items Section -->
<div class="container items-section">
  <h2 class="text-center">Reported Items</h2>

  <!-- Search Bar with Spyglass Icon -->
  <div class="form-group position-relative">
    <input type="text" class="form-control pl-4" ng-model="searchTerm" placeholder="Search for items..." />
    <i class="fas fa-search search-icon"></i>
  </div>

  <!-- Scrollable Box -->
      <div class="reported-items-container">
        <div class="row">
          <div class="col-md-4" ng-repeat="item in items | filter:searchTerm">
            <div class="card">
              <img ng-src="{{item.image}}" class="card-img-top" alt="{{item.itemName}}">
              <div class="card-body">
                <h5 class="card-title">{{item.itemName}}</h5>
                <p class="card-text">{{item.description}}</p>

                <!-- Editable Category Dropdown (Visible in Admin Mode) -->
                <div ng-if="adminMode">
                  <label for="category-{{$index}}">Category:</label>
                  <select id="category-{{$index}}" class="form-control" ng-model="item.category">
                    <option value="Lost">Lost</option>
                    <option value="Found">Found</option>
                  </select>
                </div>
                <!-- Non-Editable Category -->
                <div ng-if="!adminMode">
                  <span class="category" ng-class="{
                    'category-found': item.category === 'Found',
                    'category-lost': item.category === 'Lost'
                  }">{{item.category}}</span>
                </div>

                <!-- Delete Button (Visible in Admin Mode) -->
                <button ng-if="adminMode" class="btn btn-danger btn-sm mt-2" ng-click="deleteItem($index)">
                  Delete Report
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

  <!-- Report Form Section -->
    <div class="report-popup-container" ng-if="reportPopupVisible">
      <div class="report-popup-content">
          <form ng-submit="submitReport()">
              <h2 class="text-center">Create a Report</h2>
              <div class="form-group">
                  <label for="userName">Your Name</label>
                  <input type="text" class="form-control" id="userName" ng-model="newItem.name" placeholder="Enter your name" required />
              </div>
              <div class="form-group">
                  <label for="itemName">Item Name</label>
                  <input type="text" class="form-control" id="itemName" ng-model="newItem.itemName" placeholder="Enter item name" required />
              </div>
              <div class="form-group">
                  <label for="itemDescription">Item Description</label>
                  <textarea class="form-control" id="itemDescription" ng-model="newItem.description" rows="3" placeholder="Describe the item" required></textarea>
              </div>
              <div class="form-group">
                  <label for="itemCategory">Category</label>
                  <select class="form-control" id="itemCategory" ng-model="newItem.category" required>
                      <option value="Lost">Lost</option>
                      <option value="Found">Found</option>
                  </select>
              </div>
              <div class="form-group">
                  <label for="itemImage">Upload Item Image</label>
                  <input type="file" class="form-control-file" id="itemImage" 
                      ng-model="newItem.imageFile" 
                      onchange="angular.element(this).scope().handleFileUpload(this.files)" />
              </div>
              <button type="submit" class="btn btn-primary btn-block">Submit Report</button>

              <!-- New Close Button -->
              <button type="button" class="btn btn-secondary btn-block mt-1" ng-click="toggleReportPopup()">Close</button>
          </form>
      </div>
  </div>

  <!-- About Section -->
  <div id="about-section" class="about-section fade-in">
    <div class="container">
      <div class="row align-items-center">
        <!-- Left Column: Text -->
        <div class="col-md-6 text-center text-md-left">
          <h2>About NORBATCO Lost and Found</h2>
          <p>
            NORBATCO Lost & Found is a web-based platform designed to help you recover lost items on public transportation.
    When you report a lost item, it is logged into our secure database. This allows our system, as well as public transportation authorities, to search for and identify your lost belongings, increasing the chances of recovery.
    Our platform is user-friendly and secure, ensuring that your data is protected. For insurance claims, certificates from NORBATCO Lost & Found can often be used in place of traditional lost item reports.
    Please note that NORBATCO Lost & Found is intended for accidental losses. If your item has been stolen, you should report the theft to local law enforcement to obtain a crime reference number.
          </p>
        </div>
  
        <!-- Right Column: Image -->
        <div class="col-md-6 text-center">
          <img src="https://factohr-1a56a.kxcdn.com/wp-content/uploads/2021/03/jse.png" alt="About NORBATCO" class="img-fluid rounded">
        </div>
      </div>
    </div>
  </div>

  <!-- Footer -->
  <footer class="footer">
    <div class="footer-container">
      <div class="footer-left">
        <p>101 New Kawayan, Tacloban City, Leyte</p>
        <p># 093 9379 33017</p>
        <p>norbatco@gmail.com</p>
      </div>
      <div class="footer-center">
        <p></p>
        <p></p>
        <br>
        <br>
        <p>&copy; NORBATCO Lost and Found</p>
      </div>
      <div class="footer-right">
        <p>Find us @:</p>
        <br>
        <a href="https://facebook.com" target="_blank" class="social-icon"><i class="fab fa-facebook"></i></a>
        <a href="https://instagram.com" target="_blank" class="social-icon"><i class="fab fa-instagram"></i></a>
        <a href="https://x.com" target="_blank" class="social-icon"><i class="fab fa-twitter"></i></a>
      </div>
    </div>
  </footer>

  <!-- Button to trigger login popup -->
  <button class="btn-show-login" ng-click="toggleLoginPopup()">Login</button>

  <!-- Login Popup -->
  <div class="popup-container" ng-if="loginVisible"> <!-- Use ng-if instead of ng-show -->
    <div class="popup-content">
      <form ng-submit="handleLogin()">
        <h2>Login</h2>
        <div class="form-group">
          <label for="email">Email</label>
          <div class="input-wrapper">
            <i class="fa fa-user"></i>
            <input type="email" id="email" ng-model="user.email" placeholder="Email Address" required />
          </div>
        </div>
        <div class="form-group">
          <label for="password">Password</label>
          <div class="input-wrapper">
            <i class="fa fa-lock"></i>
            <input type="password" id="password" ng-model="user.password" placeholder="Password" required />
            <span class="toggle-password" ng-click="togglePasswordVisibility()">
              <i class="fa" ng-class="passwordVisible ? 'fa-eye-slash' : 'fa-eye'"></i>
            </span>
          </div>
        </div>
        <button type="submit" class="btn-login">Login</button>
      </form>
    </div>
  </div>

  <script>
    // JavaScript
    window.addEventListener('scroll', function() {
      const header = document.getElementById('top');
      
      if (window.scrollY > 50) {
        header.classList.add('shrink-header'); // Add class to shrink the header
      } else {
        header.classList.remove('shrink-header'); // Remove class to restore the header
      }
    });

    // AngularJS Application Script
    var app = angular.module('lostAndFoundApp', []);

    app.controller('mainController', function($scope, $anchorScroll, $location) {

      // Manage popup visibility
      $scope.loginVisible = false;

      // User data for login
      $scope.user = {
        email: '',
        password: '',
      };

       // Admin mode toggle
      $scope.adminMode = false;

      // Password visibility state
      $scope.passwordVisible = false;

      $scope.reportedItems = [
          'Black Wallet',
          'Blue Shoes',
          'Red Umbrella',
      ];

      $scope.items = [
        { name: 'Black Wallet', description: 'A small black wallet with gold details.', category: 'Found', image: 'https://i.ebayimg.com/images/g/mPgAAOSw8QtkYAin/s-l400.png' },
        { name: 'Blue Shoes', description: 'A pair of blue sneakers.', category: 'Lost', image: 'https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTWoFnMN1Dwa545eDc5UTZSt5gK1oftGJ2nUg&s' },
        { name: 'Red Umbrella', description: 'A bright red umbrella.', category: 'Found', image: 'https://www.ilmarchesato.com/cdn/shop/products/4-490_6_2048x.jpg?v=1665154607' },
      ];

      // Function to toggle the visibility of the dropdown
      $scope.isDropdownVisible = false;
      $scope.toggleDropdown = function() {
          $scope.isDropdownVisible = !$scope.isDropdownVisible;
      };

      // Function to select an item from the dropdown list
      $scope.selectedItem = '';
      $scope.selectItem = function(item) {
          $scope.selectedItem = item;
          $scope.isDropdownVisible = false; // Hide the dropdown after selection
      };

      // New item model
        $scope.newItem = {
          name: '',
          itemName: '',
          description: '',
          category: 'Lost',
          image: '',
          imageFile: null
        };

        $scope.handleFileUpload = function(files) {
            if (files && files[0]) {
              const reader = new FileReader();
              reader.onload = function(event) {
                $scope.$apply(function() {
                  $scope.newItem.image = event.target.result; // Save as a data URL
                });
              };
              reader.readAsDataURL(files[0]); // Convert the file to a base64 data URL
            }
          };

      // Handle form submission
        $scope.submitReport = function() {
          // Create a new item from the form input
          var newItem = {
            itemName: $scope.newItem.itemName,
            description: $scope.newItem.description,
            category: $scope.newItem.category,
            image: $scope.newItem.image || 'https://via.placeholder.com/150' // Fallback image if none provided
          };

          // Add the new item to the items array
          $scope.items.push(newItem);

          // Reset the form
          $scope.newItem = {
            itemName: '',
            description: '',
            category: 'Lost',
            image: '',
            imageFile: null
          };

          // Optional: Display confirmation
          alert('Your item report has been submitted!');
        };
      
      // View Items Scroll Down
      $scope.scrollDownByPercentage = function(percentage) {
      // Get the height of the viewport
      const viewportHeight = window.innerHeight;

      // Calculate the scroll distance based on the percentage
      const scrollDistance = (viewportHeight * percentage) / 100;

      window.scrollBy({
          top: scrollDistance, // Scroll vertically
          behavior: 'smooth'
          });
      };

       // Popups visibility states
      $scope.loginVisible = false;
      $scope.reportPopupVisible = false;

      // Toggle Report Form Popup
      $scope.toggleReportPopup = function() {
        $scope.reportPopupVisible = !$scope.reportPopupVisible;
      };

      // Toggle the login popup visibility
      $scope.toggleLoginPopup = function () {
        $scope.loginVisible = !$scope.loginVisible;
      };

      // Toggle password visibility
      $scope.togglePasswordVisibility = function () {
        $scope.passwordVisible = !$scope.passwordVisible;
        const passwordInput = document.getElementById('password');
        passwordInput.type = $scope.passwordVisible ? 'text' : 'password';
      };

      // Handle login form submission
      $scope.handleLogin = function () {
        if ($scope.user.email === 'norbatco@gmail.com' && $scope.user.password === 'admin123') {
          alert('Login successful! Admin mode activated.');
          $scope.adminMode = true; // Enable admin mode on successful login
          $scope.toggleLoginPopup(); // Close the login popup
        } else {
          alert('Invalid credentials. Please try again.');
        }
      };

      // Delete an item
      $scope.deleteItem = function (index) {
        if (confirm('Are you sure you want to delete this report?')) {
          $scope.items.splice(index, 1); // Remove the item from the array
        }
      };

      // Handle logout
      $scope.logout = function() {
        if (confirm('Are you sure you want to log out?')) {
          $scope.adminMode = false; // Disable admin mode
          alert('You have been logged out.');
        }
      };     
    });
  </script>

  <!-- Bootstrap and jQuery Scripts -->
  <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
</body>
</html>
